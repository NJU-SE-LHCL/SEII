# 软件体系结构文档模板

## 文档修改历史

| 修改人员 | 日期 | 修改原因 | 版本号 |
| :------: | ---- | -------- | ------ |
|          |      |          |        |
|          |      |          |        |

## 目录



## 引言

### 编制目的



### 词汇表

| 词汇名称 | 词汇含义 | 备注 |
| :------: | -------- | ---- |
|          |          |      |



### 参考资料



## 产品概述



## 逻辑视图

- 处理静态设计模型

  - 描述并绘制设计方案、逻辑表达

- 示意图

  - 注意：逻辑表达需要更加细化

  

## 组合视图

### 开发包图

- 表示软件组件在开发时环境中的静态组织
  - 描述开发包以及相互间的依赖
  - 绘制开发包图
    - 开发包图类似上述示意图画法

|      开发包       | 依赖的其他开发包                                        |
| :---------------: | ------------------------------------------------------- |
|      mainui       | adminui、couponui、hotelui、orderui、roomui、userui、vo |
|      adminui      | adminblservice、界面类库包                              |
|  adminblservice   |                                                         |
|      adminbl      | adminblservice、clientdataservice                       |
| admindataservice  | Java RMI、po                                            |
|     admindata     | databaseutility、po                                     |
|     couponui      | couponblservice、界面类库包、vo                         |
|  couponblservice  |                                                         |
|     couponbl      | couponblservice、coupondataservice、po                  |
| coupondataservice | Java RMI、po                                            |
|    coupondata     | databaseutility、po                                     |
|      hotelui      | hotelblservice、界面类库包、vo                          |
|  hotelblservice   |                                                         |
|      hotelbl      | hotelblservice、hoteldataservice、po                    |
| hoteldataservice  | Java RMI、po                                            |
|     hoteldata     | databaseutility、po                                     |
|      orderui      | orderblservice、界面类库包、vo                          |
|  orderblservice   |                                                         |
|      orderbl      | orderblservice、orderdataservice、po                    |
| orderdataservice  | Java RMI、po                                            |
|     orderdata     | databaseutility、po                                     |
|      roomui       | roomblservice、界面类库包、vo                           |
|   roomblservice   |                                                         |
|      roombl       | roomblservice、roomdataservice、po、hotelbl             |
|  roomdataservice  | Java RMI、po                                            |
|     roomdata      | databaseutility、po                                     |
|      userui       | userblservice、界面类库包、vo                           |
|   userblservice   |                                                         |
|      userbl       | userblservice、userdataservice、po                      |
|  userdataservice  | Java RMI、po                                            |
|     userdata      | databaseutility、po                                     |
|        vo         |                                                         |
|        po         |                                                         |
|     utilitybl     |                                                         |
|    界面类库包     |                                                         |
|     Java RMI      |                                                         |
|  databaseutility  | JDBC                                                    |

![客户端开发包图](https://nju.oss-cn-beijing.aliyuncs.com/1D5F198B-57D0-46D8-8BBE-59B9B7AB36EE.png)



![服务器开发包图](https://nju.oss-cn-beijing.aliyuncs.com/2A2472FA-AF70-4156-9098-CBDB0B892BD4.png)



### 运行时进程

- 表示软件在运行时进程间的交互，描述系统的动态结构

  - 绘制进程图

- 示意图：
- ![](https://nju.oss-cn-beijing.aliyuncs.com/B4A3409A-9070-4670-A70D-F8BE702E5714.png)


### 物理部署

- 处理如何将软件组件映射到硬件基础设施
  - 绘制部署图
- 示意图

![icon](http://assets.processon.com/chart_image/5ae5be27e4b039625af793c0.png?_=1554259679134)

## 架构设计

- 描述功能分解和如何在不同的层中安排软件模块
  - 描述架构中的对象，包含架构图
  - 描述组件接口信息
    - 包括：语法、前置条件、后置条件

### 模块职责
浏览器端模块和服务器端模块视图分别如下图所示。浏览器端各层和服务器端各层的职责分别如下表所示。

- 模块视图

浏览器端模块和服务器端模块视图分别如下图所示。浏览器端各层和服务器端各层的职责分别如下表所示。
![](http://picbag.oss-cn-beijing.aliyuncs.com/JLH%7D%6052QB58DI%28OG_UP_1%60P.png)

- 各层职责

浏览器端各层职责

|     层     | 职责     |
| :--------: | -------- |
| 展示层 | 展示用户图形化界面 |
| 网络模块| 接受用户输入并与后端进行数据传递 |

服务器端各层职责

|     层     | 职责     |
| :--------: | -------- |
| 启动模块 | 启动后端系统和数据初始化 |
| 业务逻辑层 | 负责对数据进行数据业务处理和对前端生成响应|
| 数据层 | 负责数据的持久化和数据访问接口|
| 网络模块 | 维持链接和将逻辑层生成的响应传输至前端|


- 层之间调用接口

|     接口     | 服务调用方     | 服务提供方     |
| :--------: | -------- | --------|
|  | web端展示层 | 后端控制模块 |
|AdminController|
|CouponController|
|HotelController|
|OrderController|
|AccountController|
| | 后端控制模块| 业务逻辑层|
|AdminService|
|CouponMatchStrategy|
|CouponService|
|HotelService|
|RoomService|
|OrderService|
|AccountService|
| | 业务逻辑层|数据层 |
|AdminMapper |
|CouponMapper|
|HotelMapper|
|RoomMapper|
|OrderMapper|
|AccountMapper|



### 用户界面层分解

根据需求，系统存在6个用户界面：登陆界面，酒店列表界面，酒店详细信息界面，预定详情界面，个人中心界面，查看订单界面。界面跳转如图所示。
![](http://picbag.oss-cn-beijing.aliyuncs.com/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%282%29.png)

#### 职责

- 用户界面层模块的职责

| 模块 | 职责 |
| :----------- | ---------- |
|Vue| 界面渲染和界面的跳转|

- 需要的服务接口

|         服务名         | 服务                   |
| :--------------------: | ---------------------- |
| bl.AccountService | 登录界面的业务逻辑接口 |
| bl.*Service|每个界面都有相应的业务逻辑接口|


#### 接口规范

| 接口名 | 语法         | npm run serve |
| ------ | :----------- | ---- |
|   vue-cli-service serve     | **前置条件** | 无 |
|        | **后置条件** | 显示页面和登陆面板 |

#### 业务逻辑层的分解

业务逻辑层包括多个针对界面的页面逻辑处理对象。例如，admin对象负责酒店管理人员信息的管理，coupon对象负责优惠券信息的管理。业务逻辑层的设计如图所示：

![](https://nju-sjim.oss-cn-beijing.aliyuncs.com/homework1/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82%E5%AF%B9%E8%B1%A1.png)

#### 业务逻辑层模块的职责

业务逻辑层模块的职责如图所示

<center>业务逻辑层的职责</center>

| 模块    | 职责                               |
| ------- | ---------------------------------- |
| orderbl | 负责实现与酒店预订界面所需要的服务 |
| userbl  | 负责实现与用户登陆界面所需要的服务 |
|         |                                    |

#### 业务逻辑层模块的接口规范

orderbl和userbl模块的接口规范如下表所示

***

<center>userbl模块的接口规范</center>

***

<center>提供的服务（供接口）</center>

| admin.addManager              | 添加酒店管理人员账号                                     |
| ----------------------------- | -------------------------------------------------------- |
| admin.getAllManagers          | 前置条件：manager列表不为空                              |
|                               | 后置条件：获得所有酒店管理人员信息，返回managers列表     |
| AccountService.registerAccout | 前置条件：注册信息格式正确且未与数据库冲突               |
|                               | 后置条件：注册账号                                       |
| AccountService.login          | 前置条件：password规则输入正确                           |
|                               | 后置条件：用户登录，登录成功会将用户信息保存在 session中 |
| AccountService.getUserInfo    | 前置条件：管理员已登录                                   |
|                               | 后置条件：获取用户个人信息                               |
| AccountService.updateUserInfo | 前置条件：管理员已登录                                   |
|                               | 后置条件：更新用户个人信息                               |

<center>需要的服务（需接口）</center>

| 服务名                 | 服务               |
| ---------------------- | ------------------ |
| Bean.copyProperties    | 生成用户值对象     |
| ResponseVO.buldFailure | 生成失败响应值对象 |
| RespnseVO.buildSuccess | 生成响应成功值对象 |
| User.setEmail          | 设置用户邮箱       |
| User.setPassword       | 设置用户密码       |
| User.setUserType       | 设置用户类型       |

***

<center>orderbl模块的接口规范</center>

<center>提供的服务（供接口）</center>



| 接口名                                  | 服务                           |
| --------------------------------------- | ------------------------------ |
| CouponMatchStrategy.ismatch             | 判断订单是否符合优惠券使用条件 |
| CouponService.getMatchOrderCoupon       | 返回某一订单可用的优惠策略列表 |
| CouponService.getHotelAllCoupon         | 擦看某个酒店提供的所有优惠策略 |
| CouponService.addHotelTargetMoneyCoupon | 添加酒店满减优惠策略           |
| HotelService.addHotel                   | 添加酒店                       |
| HotelService.updateRoomInfo             | 预订酒店修改剩余客房信息       |
| HotelService.retreveHotels              | 列表获取酒店信息               |
| HotelService.retrieveHotelDetails       | 获取某家酒店详细信息           |
| HotelService.getRoomCurNum              | 查看酒店剩余某种房间数量       |
| HotelService.getHotelOrders             | 查看酒店的所有订单             |
| RoomService.retrieveHotelRoomInfo       | 获取某个酒店的全部房间信息     |
| RoomService.inertRoomInfo               | 添加酒店客房信息               |
| RoomService.updateRoomInfo              | 预定酒店后更新客房房间数量     |
| RoomService.getRoomCurNum               | 获取酒店指定房间的剩余数量     |
| OrderService.addOrder                   | 预订酒店                       |
| OrderService.getAlOrders                | 获得所有订单信息               |
| OrderService.getUserOrders              | 获得指定用户的所有的订单信息   |
| OrderService.annulOrder                 | 撤销订单                       |

<center>需要的服务（需接口）</center>

| 服务名                    | 服务               |
| ------------------------- | ------------------ |
| coupon.setCouponName      | 设置优惠券名       |
| couponVO.getName          | 获得优惠券名       |
| coupon.setDescription     | 设置优惠券描述     |
| couponVO.getDescription   | 获得优惠券描述     |
| coupon.setCouponType      | 设置优惠券类型     |
| couponVO.getType          | 获得优惠券类型     |
| coupon.setTargetMoney     | 设置优惠券使用门槛 |
| couponVO.getTargetMoney   | 获得优惠券使用门槛 |
| coupon.setHotelId         | 设置酒店编号       |
| couponVO.getHotelId       | 获得酒店编号       |
| coupon.setDiscountMoney   | 设置优惠券减免金额 |
| couponVO.getDiscountMoney | 获得优惠券减免金额 |
| coupon.setStatus          | 设置优惠券状态     |
| couponVO.setID            | 设置优惠券编号     |
| hotel.setDescription      | 设置酒店描述       |
| hotelVO.getDescription    | 获得酒店描述       |
| hotel.setAddress          | 设置酒店地址       |
| hotelVO.getAddress        | 获得酒店地址       |
| hotel.setHotelName        | 设置酒店名称       |
| hotelVO.getHotelNam       | 获得酒店名称       |
| hotel.setPhoneNum         | 设置酒店电话       |
| hotelVO.getPhoneNum       | 获得酒店电话       |
| hotel.setManagerId        | 设置经理编号       |
| hotelVO.getManagerId      | 获得经理编号       |
| hotel.setRate             | 设置酒店评分       |
| hotelVO.getRate           | 获得酒店评分       |
| hotel.setBizRigion        | 设置酒店商圈       |
| hotelVO.getBizRigion      | 获得酒店商圈       |
| hotel.setHotelStar        | 设置酒店星级       |
| hotelVO.getHotelStar      | 获得酒店星级       |
| RoomVO.setId              | 设置房间编号       |
| HotelRoom.getId           | 获得房间编号       |
| RoomVO.setPrice           | 设置房间价格       |
| HotelRoom.getPrice        | 获得房间价格       |
| RoomVO.setRoomType        | 设置房间类型       |
| HotelRoom.getRoomType     | 获得房间类型       |
| RoomVo.setCurNum          | 设置剩余房间数量   |
| HotelRoom.getCurNum       | 获取剩余房间数量   |
| RoomVO.setTotal           | 设置房间总数       |
| HotelRoom.getTotal        | 获得房间总数       |
| HotelVO.setRooms          | 更新房间信息       |
| OrderVO.getRoomNum        | 获得预定房间的数目 |
| OrdreVO.getHotelId        | 获得酒店编号       |
| OrderVO.getRoomType       | 获得房间种类       |
| OrderVO.setCreateDate     | 设置订单时间       |
| OrderVO.setOrderState     | 设置订单状态       |
| OrderVO.setClientName     | 设置用户姓名       |
| OrderVO.setPhoneNumber    | 设置用户电话       |
| ResponseVO.buildFailure   | 生成创建失败响应   |
| ResponseVo.buildSuccess   | 生成创建成功响应   |

***

#### 数据层的分解

数据层主要给业务逻辑层提供数据访问服务，包括对于之久化数据的增、删、改、查。bl业务逻辑需要的服务由data接口提供。数据层模块的描述具体如下图所示

![](https://nju-sjim.oss-cn-beijing.aliyuncs.com/homework1/%E6%95%B0%E6%8D%AE%E5%B1%82%E6%A8%A1%E5%9D%97%E7%9A%84%E6%8F%8F%E8%BF%B02.png)

<center>数据层模块的职责</center>

| 模块   | 职责                                                         |
| ------ | ------------------------------------------------------------ |
| admin  | 基于管理员登录的持久化数据库接口，提供管理员对象的增、查服务 |
| coupon | 基于优惠券的持久化数据库接口，提供优惠券对象的增、查服务     |
| users  | 基于用户登录的持久化数据库接口，提供用户对象的增、查、更新服务 |
| hotels | 基于酒店的持久化数据接口，提供酒店对象的增、查、更新，房间对象的增、查、更新服务 |
| order  | 基于订单的持久化数据接口，提供订单对象的增、删、差服务       |

##### 数据层模块的接口规范

<center>数据层模块的接口规范</center>

| 服务名                          | 服务                                         |
| ------------------------------- | -------------------------------------------- |
| AdminMapper.addManager          | 添加酒店管理人员                             |
| AdminMapper.getAllManagers      | 获取所有酒店管理人员                         |
| CouponMapper.insertCoupon       | 增加优惠券                                   |
| CouponMapper.selectByHotelId    | 以酒店编号获取酒店所有优惠券                 |
| HotelMapper.insertHotel         | 添加酒店对象                                 |
| HotelMapper.selectAllHotel      | 获取所有酒店对象                             |
| HotelMapper.selectById          | 通过酒店编号获取酒店对象                     |
| RoomMapper.updateRoomInfo       | 更新房间信息                                 |
| RoomMapper.insertRoom           | 添加房间对象                                 |
| RoomMapper.selectRoomsByHotelId | 通过酒店编号获取该酒店所有房间对象           |
| RoomMapper.getRoomCurNum        | 通过酒店编号和房间种类获取改酒店该种房间数量 |
| OrderMapper.addOrder            | 添加订单                                     |
| OrderMapper.getAllOrders        | 获取所有订单                                 |
| OrderMapper.getUserOrders       | 通过用户编号获取该用户的所有订单             |
| OrderMapper.annulOrder          | 通过用户编号删除订单                         |
| OrderMapper.getOrderById        | 通过订单编号获取订单对象                     |
| AccountMapper.createNewAccout   | 添加酒店管理人员对象                         |
| AccountMapper.getAccountByName  | 通过姓名获得用户对象                         |
| AccountMapper.getAccountById    | 通过用户编号获得用户对象                     |
| AccountMapper.updateAccount     | 更新用户信息                                 |




### 信息视角

- 描述数据持久化对象(PO)
  - 属性及其定义
  - 类型